<!DOCTYPE html>
<html>
<head>
    <meta charset="gbk" />
    <title>FD.widget.SWFStore</title>
    <link href="/fdevlib/static/css/merge.css" rel="stylesheet"/>
    <link href="/fdevlib/static/css/ep.css" rel="stylesheet"/>
    <script src="/fdevlib/static/js/merge-fdev3.js"></script>
    <style type="text/css">
        .style1
        {
            width: 332px;
        }
        .style2
        {
            width: 333px;
        }
    </style>
</head>
<body>
    <div class="g-memo">
        <h2>SWFStore: Flash本地存储</h2>
        <h3>更新日志</h3>
        <ul class="update-histroy">
            <li>@version 1.0 2010-07-07 正式发布</li>
        </ul>
    </div>
    <div class="g-detail">
        <h3>开始：</h3>
        如果你想使用SWFStore组件，请在页面中加入以下片段:
        <pre class="brush:js;">
ImportJavscript.url("http://style.china.alibaba.com/js/lib/fdev-v3/core/fdev-min.js");
ImportJavscript.url("http://style.china.alibaba.com/js/lib/fdev-v3/widget/flash/flash-min.js");
ImportJavscript.url("http://style.china.alibaba.com/js/lib/fdev-v3/widget/swfstore/swfstore-min.js");
	    </pre>
        <h3>使用说明</h3>
        <p>组件调用方法如下 (传入配置参数，将覆盖默认配置）：
            <pre class="brush:js;">
            //最简单初始化    
            FD.SWFStore.init();
        </pre>
            <pre class="brush:js;">
            //也可以传入参数
            FD.SWFStore.init({
                //数据存储的路径
                local_path: '/'              
            });
        </pre>
        </p>
        
        <h3>使用限制</h3>
        <ul>
            <li>1、只能在受限制的域名下使用，目前会对HTML页面的域名做这样的正则检查：<br />
            <cite>/((taobao|alipay|alibaba|yahoo|alisoft|alimama|koubei|aliimg)\.(com|net|cn|com\.cn)|1688\.com)$/i</cite><br />
            如果需要在其他域名下也可以使用，需要修改Flash，或使用其他Flash文件地址。</li>
        </ul>
        
        <h3>配置参数列表</h3>
        <table class="g-paramtable">
            <thead>
                <tr>
                    <th>配置参数</th>
                    <th>参数可选值</th>
                    <th>作用说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>swfUrl</td>
                    <td>String，默认为&#39;http://img.china.alibaba.com/swfapp/swfstore/swfstore.swf&#39;</td>
                    <td>核心Flash文件地址</td>
                </tr>
                <tr class="even">
                    <td>write_mode</td>
                    <td>true | false，默认为 false</td>
                    <td>是否以document.write模式输出Flash内容</td>
                </tr>
                <tr>
                    <td>start_delay</td>
                    <td>Number, 默认为500</td>
                    <td>Flash程序延迟启动时间，单位为毫秒。加入延迟的作用是解决在傲游、腾讯浏览器等基于IE的多标签浏览器中Flash不能被js正常调用的问题。</td>
                </tr>
                <tr class="even">
                    <td>local_path</td>
                    <td>String, 默认为 &#39;/&#39;</td>
                    <td>数据存储的路径，存储的数据只能被同域名下该目录内(包括子目录)的其他swf文件读取。</td>
                </tr>
            </tbody>
        </table>
        
        <h3>公共属性</h3>
        <table class="g-paramtable">
            <thead>
                <tr>
                    <th>属性名称</th>
                    <th class="style2">说明</th>
                    <th>取值</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>config</td>
                    <td class="style2">默认配置对象</td>
                    <td>Object</td>
                </tr>
                <tr>
                    <td>ready</td>
                    <td class="style2">存储引擎Flash是否已初始化完毕的标志</td>
                    <td>true - 本地存储已经可用<br />false - 本地存储功能还未可用</td>
                </tr>
                <tr>
                    <td>TIMEOUT</td>
                    <td class="style2">超时设置，当超过以毫秒为单位的这个时间，就会抛出error事件</td>
                    <td>默认为10000，即10秒</td>
                </tr>
            </tbody>
        </table>
        
        <h3>方法</h3>
        <table class="g-paramtable">
            <thead>
                <tr>
                    <th>方法名称</th>
                    <th class="style1">参数说明</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>getItem</td>
                    <td class="style1">key - String 需要获取的数据字段名称</td>
                    <td>获取存储在Flash SharedObject中的该key对应的值</td>
                </tr>
                <tr class="even">
                    <td>setItem</td>
                    <td class="style1">key - String 存储的字段名<br />
                        value - * 值 </td>
                    <td>将数据存储到Flash SharedObject中，无返回值。</td>
                </tr>
                <tr>
                    <td>removeItem</td>
                    <td class="style1">key - String 被删除的数据字段名称</td>
                    <td>删除字段</td>
                </tr>
                <tr class="even">
                    <td>init</td>
                    <td class="style1">config - Object 配置对象</td>
                    <td>初始化引擎</td>
                </tr>
                <tr class="even">
                    <td>on</td>
                    <td class="style1">type - String 事件名称<br />
                        handler - Function 处理函数<br />
                        data - Object 传递给处理函数的第二个参数<br />
                        scope - Object 处理函数运行时的作用域(this)</td>
                    <td>注册事件侦听</td>
                </tr>
            </tbody>
        </table>
        
        
        <h3>事件</h3>
        <table class="g-paramtable">
            <thead>
                <tr>
                    <th>事件名称</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>engineReady</td>
                    <td>本地存储已经准备好，可以读取或写入数据了</td>
                </tr>
                <tr class="even">
                    <td>error</td>
                    <td>初始化存储引擎失败</td>
                </tr>
                <tr>
                    <td>dataChange</td>
                    <td>数据发生变化时触发，例如删除、设置时。</td>
                </tr>
            </tbody>
        </table>
        
        <h3>Demo演示</h3>
        这里为开发者展示了这个组件的种种用法：<a target="_blank" href="/fdevlib/examples/fdev3/widget.SWFStore.html">example: SWFStore</a>
        <h3>提建议给开发者</h3>
        作者：邱华<br />
        邮件：<a href="mailto:hua.qiuh@alibaba-inc.com">hua.qiuh@alibaba-inc.com</a><br />
        旺旺：qhwa2009
    </div>
</body>
</html>
